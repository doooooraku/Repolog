# Repolog Glossary（用語集 / Reference）

この文書は Repolog の仕様書・Issue・PR・コード内で使う「言葉の意味」を固定するための辞書です。
“同じものを違う言い方で呼ぶ”/“人によって意味がズレる” を防ぎます。

- 種別（Diataxis）：Reference（参照）
- 読者：未来の自分 / 共同開発者 / Codex（AI）/ レビュワー / テスター
- 目的：迷ったらここを見て「用語の意味」と「同義語/禁止語」が1分で分かること

---

## 0. この文書の使い方（最短）

### 0-1. こんなときに使う
- 仕様書で同じ概念に違う呼び名が出てきた
- Issue/PRで言葉が曖昧になりそう
- UI/テスト/実装で用語の粒度が揃っていないと感じた
- 翻訳（i18n）や画面ID、機能IDの意味が混乱した

### 0-2. 更新ルール（最低限）
- 新しい概念が登場したら追記する
- 意味が変わったら修正する
- 表記ゆれが出たら正を決めて「同義語」を登録する

### 0-3. 正（Single Source of Truth）
矛盾が起きたら、原則こう扱います。

1) コード（実装）
2) constraints（前提/制約）
3) ADR（理由・比較・却下案）
4) その他仕様書

---

## 1. ID・採番（仕様書/Issue/PRで共通言語にする）

### 1-1. 機能ID（F-xx）
- 形式：`F-01` のように `F-` + 2桁
- 意味：ユーザー価値単位の機能
- 例：
  - `F-01`：レポートCRUD
  - `F-05`：PDFプレビュー/出力

### 1-2. 画面ID（S-xx）
- 形式：`S-01` のように `S-` + 2桁
- 意味：UI画面の単位
- 例：`S-01` Home、`S-02` Report Editor、`S-03` PDF Preview、`S-07` Settings

### 1-3. ユースケースID（UC-xx）
- 形式：`UC-01` のように `UC-` + 2桁
- 意味：ユーザー行動のシナリオ単位

### 1-4. テストケースID（TC-xxx / Scenario-xx）
- `TC-F05-001` のように対象機能が分かる形で付ける
- E2Eは `Scenario-01` のようにユーザーストーリーで付ける

---

## 2. プロダクト/ドメイン用語（Repologの中身）

### Repolog
- 定義：ローカル志向（Local-first）の写真レポートPDFアプリ。自前バックエンドを持たない。
- 同義語：なし
- 禁止語：クラウド同期やアカウント前提の断定表現

### レポート（Report）
- 定義：1回の提出・記録単位。写真、コメント、メタ情報（日時/位置/天気）を束ねたもの。
- 関連：`F-01`

### 写真（Photo）
- 定義：レポートに紐づく画像。順序（order）が重要。
- 注意：PDFは順序に従って配置する。

### 表紙（Cover）
- 定義：PDF 1ページ目。提出先が最初に見る要約ページ。

### コメントページ（Comment Pages）
- 定義：コメント本文を載せるページ。長文時は複数ページに分割される。

### 写真ページ（Photo Pages）
- 定義：写真を載せるページ。ページ番号と写真番号を表示する。

### タイムライン（Timeline）
- 定義：Homeでレポートを時系列表示する一覧。

### ピン留め（Pinned）
- 定義：重要レポートを先頭側に固定する状態。

### タグ（Tag）
- 定義：レポート検索・フィルタに使う文字ラベル。

### 標準レイアウト（Standard）
- 定義：PDF写真ページが1ページ2枚（上下2段）。

### 大きく（Large）
- 定義：PDF写真ページが1ページ1枚。Freeはプレビューのみ、Proは出力可能。

### PDFプレビュー（Preview）
- 定義：保存せず表示確認する操作。出力回数制限の対象外。

### PDF出力（Export）
- 定義：OSの保存先選択UIを通じてPDFを保存する操作。

### 位置情報ON/OFF（Include Location）
- 定義：位置情報を取得しPDFに含めるかの設定トグル。
- OFF時：権限要求せず `-` を表示。

### 逆ジオコーディング（Reverse Geocoding）
- 定義：緯度経度から住所文字列を取得する処理。

---

## 3. Free / Pro / 収益化用語

### Free（無料版）
- 定義：無料で使える状態。
- 不変条件（要点）：
  - 1レポート写真10枚まで
  - PDF出力は月5回まで
  - 広告あり

### Pro（有料版）
- 定義：購入済み状態。
- 不変条件（要点）：
  - 写真/出力の実質制限を解除
  - 広告なし
  - 大きく（1枚）レイアウトの出力可

### サブスクリプション（Subscription）
- 定義：月額/年額など継続課金の購入形態。

### RevenueCat
- 定義：課金状態判定・購入・復元を扱うSDK/サービス。

### AdMob
- 定義：広告配信プラットフォーム（Google）。
- 注意：本番広告ユニットIDをソースに直書きしない。

### UMP（User Messaging Platform）
- 定義：EEA向け同意管理の仕組み。
- 用語：`canRequestAds` / `privacyOptionsRequirementStatus`

---

## 4. 画面/UI用語

### 画面（Screen）
- 定義：ユーザーが見るUIの単位。画面ID（S-xx）で表す。

### コンポーネント（Component）
- 定義：再利用するUI部品。

### FAB（Floating Action Button）
- 定義：主要アクションを起動する浮遊ボタン（例：新規レポート）。

### ダイアログ / アラート（Dialog / Alert）
- 定義：確認を要求するポップアップ。

### トースト（Toast）
- 定義：短時間で消える通知。

### セーフエリア（Safe Area）
- 定義：ノッチ/ステータスバー等と重ならない表示領域。

---

## 5. 多言語/i18n用語

### i18n
- 定義：internationalization（国際化）。

### ローカライズ（l10n）
- 定義：localization（地域化）。

### i18nキー
- 定義：翻訳文言参照キー（例：`home.title`）。

### フォールバック（Fallback）
- 定義：対象言語に未翻訳キーがあるとき、`en.ts` の文言を代替表示する仕組み。
- 注意：フォールバックは「壊れないための安全策」であり、翻訳完了を意味しない。

### 未使用候補キー（Unused Candidate Key）
- 定義：`en.ts` に存在するが、`app/` と `src/` のコード参照で検出されないi18nキー。
- 運用：`docs/how-to/i18n/i18n_key_inventory.md` で棚卸しし、段階削除の対象を決める。

### 言語コード（Language Code）
- 定義：BCP47/IANA準拠の言語タグ。
- 例：`nl` は Dutch（オランダ語）

### LTR / RTL
- LTR：左→右
- RTL：右→左
- Repolog方針：LTRのみ（RTLは非対応）

---

## 6. 保存/データ/セキュリティ用語

### ローカル志向（Local-first）
- 定義：主要データを端末内で扱う設計方針。

### SQLite
- 定義：レポート/写真メタ情報を保持する端末内DB。

### SecureStore
- 定義：課金状態など機密性の高い小データを保存する暗号化ストレージ。

### AsyncStorage
- 定義：設定値など非機密データの永続化ストレージ。

### 秘密情報（Secrets）
- 定義：APIキー、広告ユニットID等の漏洩リスクが高い情報。
- ルール：ソース直書き禁止。

### PII（個人特定情報）
- 定義：個人を特定できる情報。ログへ出さない。

---

## 7. 実装/アーキテクチャ用語

### Store（状態管理）
- 定義：UI状態と操作をまとめる層（例：設定、Pro状態、レポート一覧）。

### Repository（データ層）
- 定義：DBへの読み書きを集約する層。

### Service（サービス層）
- 定義：外部連携や業務ロジックをまとめる層。

### 型（Type）
- 定義：TypeScriptの型。データ契約を固定し不整合を減らす。

---

## 8. テスト/品質用語

### 受け入れ条件（Acceptance Criteria / AC）
- 定義：Issue/機能が合格と言える判定条件。

### ユニットテスト（Unit Test）
- 定義：関数やモジュール単位のテスト。

### E2Eテスト（End-to-End）
- 定義：起動から操作結果までを実機に近い形で検証するテスト。

### Jest
- 定義：JavaScript/TypeScript向けテストランナー。

### Maestro
- 定義：モバイルE2E自動操作ツール。

---

## 9. 開発運用/GitHub用語

### docs-as-code
- 定義：ドキュメントをコード同様に Git/PR/CIで管理する運用。

### CI
- 定義：push/PRで自動テストを回す仕組み。

### PR
- 定義：変更をレビューして取り込むための提案単位。

### DoD（Definition of Done）
- 定義：完了判定のチェック項目セット。

### ブランチ保護（Branch Protection）
- 定義：必須チェック成功/レビュー必須などを強制する設定。

### CODEOWNERS
- 定義：パス単位でレビュー責任者を割り当てる仕組み。

---

## 10. 表記ルール（表記ゆれ対策）

- 正：**レポート**（英語併記するなら Report）
- 正：**写真**（英語併記するなら Photo）
- 正：**受け入れ条件**（AC）
- 正：**Free / Pro**（実装・仕様では英語表記を優先）

---

## 11. 追加したい用語が出たら（テンプレ）

以下をコピペして追記してください。

### 用語名（日本語 / English）
- 定義：
- 同義語：
- 禁止語：
- 使う場面：
- 例：
- 関連（F-xx / S-xx / UC-xx / TC-xx / ADR）：
- 正（どこが真実？）：
